---
title: "Controle de versão com git, GitHub e RStudio"
author: "[Maurício Vancine](https://mauriciovancine.github.io/)<br>"
date: "06/05/2025"
date-format: long
format: 
  revealjs:
    theme: [custom.scss]
    slide-number: c/t
    show-slide-number: all
    hash-type: number
    preview-links: false
    chalkboard: true
    logo: "https://git-scm.com/images/logos/downloads/Git-Logo-1788C.png"
    execute:
      echo: true
      eval: true
      warning: false
      message: false
editor: source
lang: pt-br
---

![](img/gif_delorean.gif), ![](img/git_revert_reset.png)
background-size: 400px, 500px
background-position: 25% 80%, 95% 50%

# 13. Desfazer: git revert e git reset

## Desfazendo operações no git

1. **git revert**: desfaz um commit **preservando o histórico** (criando outro commit)
1. **git reset**:  desfaz um commit **deletando o histórico** (deletando commits)

---

# 13. Desfazer: git revert e git reset

## 1. **git revert**: desfaz um commit preservando o histórico (criando outro commit)

## Sintaxe

```{bash eval=FALSE}
# reverte um commit especifico
git revert <hash do commit>
```

```{bash eval=FALSE}
# reverter o ultimo commit
git revert HEAD
```

```{bash eval=FALSE}
# cancelar uma reversao
git revert --abot
```

---

![](img/general_butterfly_effect.jpg)
background-size: 500px
background-position: 80% 95%

# 13. Desfazer: git revert e git reset

## 1. **git revert**: desfaz um commit preservando o histórico (criando outro commit)

### **IMPORTANTE!**

### 1. Deve-se trabalhar em um diretório de trabalho limpo. Executar sempre **git add** e **git commit** antes de tentar reverter um commit

### 2. Tente não **mudar** o passado!

---

# 13. Desfazer: git revert e git reset

## 1. **git revert**: desfaz um commit preservando o histórico (criando outro commit)

### Estado

```{bash eval=FALSE}
git status
```
```{bash eval=FALSE}
On branch master
nothing to commit, working tree clean
```

### Histórico

```{bash eval=FALSE}
git log --oneline
```
```{bash eval=FALSE}
f9f2e9c (HEAD -> master) mod2 test.txt
dcbd894 mod test.txt
8b33bc5 add test.txt
```

---

# 13. Desfazer: git revert e git reset

## 1. **git revert**: desfaz um commit preservando o histórico (criando outro commit)

### Reverter - mensagem

```{bash eval=FALSE}
git revert f9f2e9c
```
```{bash eval=FALSE}
Revert "mod2 test.txt"

This reverts commit f9f2e9c867cfd549d0efcab1519a5ec9d86e7d0d.

# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
#
# On branch master
# Changes to be committed:
#       modified:   test.txt
#
```

---

# 13. Desfazer: git revert e git reset

## 1. **git revert**: desfaz um commit preservando o histórico (criando outro commit)

### Reverter

```{bash eval=FALSE}
git revert f9f2e9c
```
```{bash eval=FALSE}
[master fca02a2] Revert "mod2 test.txt"
 1 file changed, 1 insertion(+), 3 deletions(-)
```

### Estado

```{bash eval=FALSE}
git status
```
```{bash eval=FALSE}
On branch master
nothing to commit, working tree clean
```

---

# 13. Desfazer: git revert e git reset

## 1. **git revert**: desfaz um commit preservando o histórico (criando outro commit)

### Histórico

```{bash eval=FALSE}
git log --oneline
```
```{bash eval=FALSE}
fca02a2 (HEAD -> master) Revert "mod2 test.txt"
f9f2e9c mod2 test.txt
dcbd894 mod test.txt
8b33bc5 add test.txt
```

---

![](img/git_reset.png)
background-size: 450px
background-position: 87% 90%

# 13. Desfazer: git revert e git reset

## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)

### Sintaxe

```{bash eval=FALSE}
git reset [modo] [arquivo|commit]
```

**Aplicações**

- descartar commits em um branch privado
- desfazer alterações não comitadas (branch privado)
- tirar arquivos da área de staged

**Observações**

- descartar commits de um branch público: **git revert**
- descartar alterações no diretório de trabalho: **git checkout**

---

![](img/git_reset_modes2.png), ![](img/git_reset_modes.png)
background-size: 500px, 400px
background-position: 10% 90%, 85% 90%

# 13. Desfazer: git revert e git reset

## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)

### Modos principais

- **--soft**: não reseta o índice ou o diretório de trabalho (modo seguro)
- **--mixed (default)**: reseta o índice, mas não o diretório de trabalho (modo seguro)
- **--hard**: reseta o índice e o diretório de trabalho (modo não seguro)

---

# 13. Desfazer: git revert e git reset

## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)

### Exemplos

**git reset**

Reseta a *staging area* (retira os arquivos) para corresponder ao commit mais recente, sem modificar o *working directory*

**git reset test.txt**

Retira o test.txt da *staging area*, sem modificar o *working directory*

**git reset --hard**

Reseta a *staging area* e o *working directory* para corresponder ao commit mais recente. Todas as alterações no diretório são sobrescritas

---

# 13. Desfazer: git revert e git reset

## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)

### Exemplos

**git reset <commit>**

Move a versão para o commit indicado, reseta a *staging area* para corresponder a ele, mas não modifica o *working directory*

**git reset <commit> --hard**

Move a versão para o commit indicado e reseta tanto a *staging area*, quanto o *working directory* para corresponder ao commit especificado

---

# 13. Desfazer: git revert e git reset

## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)

### Estado

```{bash eval=FALSE}
git status
```
```{bash eval=FALSE}
On branch master
nothing to commit, working tree clean
```

---

![](img/general_bloco_notas.png){fig-align='center'}
background-size: 250px
background-position: 50% 80%

# 13. Desfazer: git revert e git reset

## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)

### Vamos editar o arquivo "test.txt"

```{bash eval=FALSE}
Acabo de inserir uma edição ao meu arquivo
Viagens no tempo podem ser perigosas...
```

---

# 13. Desfazer: git revert e git reset

## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)

### Estado

```{bash eval=FALSE}
git status
```
```{bash eval=FALSE}
On branch master
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   test.txt

no changes added to commit (use "git add" and/or "git commit -a")
```

---

# 13. Desfazer: git revert e git reset

## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)

### Adicionar

```{bash eval=FALSE}
git add -Av
```
```{bash eval=FALSE}
add 'test.txt'
```

---

# 13. Desfazer: git revert e git reset

## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)

### Estado

```{bash eval=FALSE}
git status
```
```{bash eval=FALSE}
On branch master
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
	modified:   test.txt
```

---

# 13. Desfazer: git revert e git reset

## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)

### Remover do staged area

### Resetar

```{bash eval=FALSE}
git reset test.txt
```
```{bash eval=FALSE}
Unstaged changes after reset:
M	test.txt
```

---

# 13. Desfazer: git revert e git reset

## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)

### Estado

```{bash eval=FALSE}
git status
```
```{bash eval=FALSE}
On branch master
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   test.txt

no changes added to commit (use "git add" and/or "git commit -a")
```

---

# 13. Desfazer: git revert e git reset

## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)

### Ver o conteúdo do arquivo

```{bash eval=FALSE}
cat test.txt
```
```{bash eval=FALSE}
Acabo de inserir uma edição ao meu arquivo
Viagens no tempo podem ser perigosas...
```

---

# 13. Desfazer: git revert e git reset

## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)

### Histórico

```{bash eval=FALSE}
git log --oneline
```
```{bash eval=FALSE}
fca02a2 (HEAD -> master) Revert "mod2 test.txt"
f9f2e9c mod2 test.txt
dcbd894 mod test.txt
8b33bc5 add test.txt
```

---

# 13. Desfazer: git revert e git reset

## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)

### Adicionar

```{bash eval=FALSE}
git add -Av
```
```{bash eval=FALSE}
add 'test.txt'
```

### Commitar

```{bash eval=FALSE}
git commit -m "mod3 test.txt"
```
```{bash eval=FALSE}
[master 4b0c4e8] mod3 test.txt
 1 file changed, 2 insertions(+), 1 deletion(-)
```

---

# 13. Desfazer: git revert e git reset

## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)

### Histórico

```{bash eval=FALSE}
git log --oneline
```
```{bash eval=FALSE}
4b0c4e8 (HEAD -> master) mod3 test.txt
fca02a2 Revert "mod2 test.txt"
f9f2e9c mod2 test.txt
dcbd894 mod test.txt
8b33bc5 add test.txt
```

---

# 13. Desfazer: git revert e git reset

## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)

### Resetar

```{bash eval=FALSE}
git reset --hard f9f2e9c
```
```{bash eval=FALSE}
HEAD is now at f9f2e9c mod2 test.txt
```

--

### Histórico

```{bash eval=FALSE}
git log --oneline
```
```{bash eval=FALSE}
f9f2e9c (HEAD -> master) mod2 test.txt
dcbd894 mod test.txt
8b33bc5 add test.txt
```

---

# 13. Desfazer: git revert e git reset

## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)

### Remover arquivo

```{bash eval=FALSE}
rm test.txt
```

### Adicionar

```{bash eval=FALSE}
git add -Av
```

### Commitar

```{bash eval=FALSE}
git commit -m "rem text.txt"
```

---

# 13. Desfazer: git revert e git reset

## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)

### Histórico

```{bash eval=FALSE}
git log --oneline
```
```{bash eval=FALSE}
6a417c5 (HEAD -> master) rem text.txt
f9f2e9c mod2 test.txt
dcbd894 mod test.txt
8b33bc5 add test.txt
```

---

# 13. Desfazer: git revert e git reset

## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)

### Resetar

```{bash eval=FALSE}
git reset --hard f9f2e9c
```
```{bash eval=FALSE}
HEAD is now at f9f2e9c mod2 test.txt
```

--

### Histórico

```{bash eval=FALSE}
git log --oneline
```
```{bash eval=FALSE}
f9f2e9c (HEAD -> master) mod2 test.txt
dcbd894 mod test.txt
8b33bc5 add test.txt
```

---

, inverse
![](img/gif_cat_ohh.gif)
background-size: 600px
background-position: 50% 50%

---

![](img/general_butterfly_effect.jpg)
background-size: 600px
background-position: 50% 95%

# 13. Desfazer: git revert e git reset

## Desfazendo operações no git

### 1. **git revert**: desfaz um commit **preservando o histórico** (criando outro commit)

### 2. **git reset**:  desfaz um commit **deletando o histórico** (deletando commits)

