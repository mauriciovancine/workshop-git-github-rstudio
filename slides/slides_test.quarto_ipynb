{
  "cells": [
    {
      "cell_type": "markdown",
      "metadata": {},
      "source": [
        "---\n",
        "title: \"Controle de versão com git, GitHub e RStudio\"\n",
        "author: \"[Maurício Vancine](https://mauriciovancine.github.io/)<br>\"\n",
        "date: \"06/05/2025\"\n",
        "date-format: long\n",
        "format: \n",
        "  revealjs:\n",
        "    theme: [custom.scss]\n",
        "    slide-number: c/t\n",
        "    show-slide-number: all\n",
        "    hash-type: number\n",
        "    preview-links: false\n",
        "    chalkboard: true\n",
        "    logo: \"https://git-scm.com/images/logos/downloads/Git-Logo-1788C.png\"\n",
        "    execute:\n",
        "      echo: true\n",
        "      eval: true\n",
        "      warning: false\n",
        "      message: false\n",
        "editor: source\n",
        "lang: pt-br\n",
        "---\n",
        "\n",
        "\n",
        "![](img/gif_delorean.gif), ![](img/git_revert_reset.png)\n",
        "background-size: 400px, 500px\n",
        "background-position: 25% 80%, 95% 50%\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## Desfazendo operações no git\n",
        "\n",
        "1. **git revert**: desfaz um commit **preservando o histórico** (criando outro commit)\n",
        "1. **git reset**:  desfaz um commit **deletando o histórico** (deletando commits)\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 1. **git revert**: desfaz um commit preservando o histórico (criando outro commit)\n",
        "\n",
        "## Sintaxe\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "# reverte um commit especifico\n",
        "git revert <hash do commit>\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "# reverter o ultimo commit\n",
        "git revert HEAD\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "# cancelar uma reversao\n",
        "git revert --abot\n",
        "```\n",
        "\n",
        "\n",
        "---\n",
        "\n",
        "![](img/general_butterfly_effect.jpg)\n",
        "background-size: 500px\n",
        "background-position: 80% 95%\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 1. **git revert**: desfaz um commit preservando o histórico (criando outro commit)\n",
        "\n",
        "### **IMPORTANTE!**\n",
        "\n",
        "### 1. Deve-se trabalhar em um diretório de trabalho limpo. Executar sempre **git add** e **git commit** antes de tentar reverter um commit\n",
        "\n",
        "### 2. Tente não **mudar** o passado!\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 1. **git revert**: desfaz um commit preservando o histórico (criando outro commit)\n",
        "\n",
        "### Estado\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git status\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "On branch master\n",
        "nothing to commit, working tree clean\n",
        "```\n",
        "\n",
        "\n",
        "### Histórico\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git log --oneline\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "f9f2e9c (HEAD -> master) mod2 test.txt\n",
        "dcbd894 mod test.txt\n",
        "8b33bc5 add test.txt\n",
        "```\n",
        "\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 1. **git revert**: desfaz um commit preservando o histórico (criando outro commit)\n",
        "\n",
        "### Reverter - mensagem\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git revert f9f2e9c\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "Revert \"mod2 test.txt\"\n",
        "\n",
        "This reverts commit f9f2e9c867cfd549d0efcab1519a5ec9d86e7d0d.\n",
        "\n",
        "# Please enter the commit message for your changes. Lines starting\n",
        "# with '#' will be ignored, and an empty message aborts the commit.\n",
        "#\n",
        "# On branch master\n",
        "# Changes to be committed:\n",
        "#       modified:   test.txt\n",
        "#\n",
        "```\n",
        "\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 1. **git revert**: desfaz um commit preservando o histórico (criando outro commit)\n",
        "\n",
        "### Reverter\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git revert f9f2e9c\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "[master fca02a2] Revert \"mod2 test.txt\"\n",
        " 1 file changed, 1 insertion(+), 3 deletions(-)\n",
        "```\n",
        "\n",
        "\n",
        "### Estado\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git status\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "On branch master\n",
        "nothing to commit, working tree clean\n",
        "```\n",
        "\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 1. **git revert**: desfaz um commit preservando o histórico (criando outro commit)\n",
        "\n",
        "### Histórico\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git log --oneline\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "fca02a2 (HEAD -> master) Revert \"mod2 test.txt\"\n",
        "f9f2e9c mod2 test.txt\n",
        "dcbd894 mod test.txt\n",
        "8b33bc5 add test.txt\n",
        "```\n",
        "\n",
        "\n",
        "---\n",
        "\n",
        "![](img/git_reset.png)\n",
        "background-size: 450px\n",
        "background-position: 87% 90%\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)\n",
        "\n",
        "### Sintaxe\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git reset [modo] [arquivo|commit]\n",
        "```\n",
        "\n",
        "\n",
        "**Aplicações**\n",
        "\n",
        "- descartar commits em um branch privado\n",
        "- desfazer alterações não comitadas (branch privado)\n",
        "- tirar arquivos da área de staged\n",
        "\n",
        "**Observações**\n",
        "\n",
        "- descartar commits de um branch público: **git revert**\n",
        "- descartar alterações no diretório de trabalho: **git checkout**\n",
        "\n",
        "---\n",
        "\n",
        "![](img/git_reset_modes2.png), ![](img/git_reset_modes.png)\n",
        "background-size: 500px, 400px\n",
        "background-position: 10% 90%, 85% 90%\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)\n",
        "\n",
        "### Modos principais\n",
        "\n",
        "- **--soft**: não reseta o índice ou o diretório de trabalho (modo seguro)\n",
        "- **--mixed (default)**: reseta o índice, mas não o diretório de trabalho (modo seguro)\n",
        "- **--hard**: reseta o índice e o diretório de trabalho (modo não seguro)\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)\n",
        "\n",
        "### Exemplos\n",
        "\n",
        "**git reset**\n",
        "\n",
        "Reseta a *staging area* (retira os arquivos) para corresponder ao commit mais recente, sem modificar o *working directory*\n",
        "\n",
        "**git reset test.txt**\n",
        "\n",
        "Retira o test.txt da *staging area*, sem modificar o *working directory*\n",
        "\n",
        "**git reset --hard**\n",
        "\n",
        "Reseta a *staging area* e o *working directory* para corresponder ao commit mais recente. Todas as alterações no diretório são sobrescritas\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)\n",
        "\n",
        "### Exemplos\n",
        "\n",
        "**git reset <commit>**\n",
        "\n",
        "Move a versão para o commit indicado, reseta a *staging area* para corresponder a ele, mas não modifica o *working directory*\n",
        "\n",
        "**git reset <commit> --hard**\n",
        "\n",
        "Move a versão para o commit indicado e reseta tanto a *staging area*, quanto o *working directory* para corresponder ao commit especificado\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)\n",
        "\n",
        "### Estado\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git status\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "On branch master\n",
        "nothing to commit, working tree clean\n",
        "```\n",
        "\n",
        "\n",
        "---\n",
        "\n",
        "![](img/general_bloco_notas.png){fig-align='center'}\n",
        "background-size: 250px\n",
        "background-position: 50% 80%\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)\n",
        "\n",
        "### Vamos editar o arquivo \"test.txt\"\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "Acabo de inserir uma edição ao meu arquivo\n",
        "Viagens no tempo podem ser perigosas...\n",
        "```\n",
        "\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)\n",
        "\n",
        "### Estado\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git status\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "On branch master\n",
        "Changes not staged for commit:\n",
        "  (use \"git add <file>...\" to update what will be committed)\n",
        "  (use \"git restore <file>...\" to discard changes in working directory)\n",
        "\tmodified:   test.txt\n",
        "\n",
        "no changes added to commit (use \"git add\" and/or \"git commit -a\")\n",
        "```\n",
        "\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)\n",
        "\n",
        "### Adicionar\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git add -Av\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "add 'test.txt'\n",
        "```\n",
        "\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)\n",
        "\n",
        "### Estado\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git status\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "On branch master\n",
        "Changes to be committed:\n",
        "  (use \"git restore --staged <file>...\" to unstage)\n",
        "\tmodified:   test.txt\n",
        "```\n",
        "\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)\n",
        "\n",
        "### Remover do staged area\n",
        "\n",
        "### Resetar\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git reset test.txt\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "Unstaged changes after reset:\n",
        "M\ttest.txt\n",
        "```\n",
        "\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)\n",
        "\n",
        "### Estado\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git status\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "On branch master\n",
        "Changes not staged for commit:\n",
        "  (use \"git add <file>...\" to update what will be committed)\n",
        "  (use \"git restore <file>...\" to discard changes in working directory)\n",
        "\tmodified:   test.txt\n",
        "\n",
        "no changes added to commit (use \"git add\" and/or \"git commit -a\")\n",
        "```\n",
        "\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)\n",
        "\n",
        "### Ver o conteúdo do arquivo\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "cat test.txt\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "Acabo de inserir uma edição ao meu arquivo\n",
        "Viagens no tempo podem ser perigosas...\n",
        "```\n",
        "\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)\n",
        "\n",
        "### Histórico\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git log --oneline\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "fca02a2 (HEAD -> master) Revert \"mod2 test.txt\"\n",
        "f9f2e9c mod2 test.txt\n",
        "dcbd894 mod test.txt\n",
        "8b33bc5 add test.txt\n",
        "```\n",
        "\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)\n",
        "\n",
        "### Adicionar\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git add -Av\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "add 'test.txt'\n",
        "```\n",
        "\n",
        "\n",
        "### Commitar\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git commit -m \"mod3 test.txt\"\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "[master 4b0c4e8] mod3 test.txt\n",
        " 1 file changed, 2 insertions(+), 1 deletion(-)\n",
        "```\n",
        "\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)\n",
        "\n",
        "### Histórico\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git log --oneline\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "4b0c4e8 (HEAD -> master) mod3 test.txt\n",
        "fca02a2 Revert \"mod2 test.txt\"\n",
        "f9f2e9c mod2 test.txt\n",
        "dcbd894 mod test.txt\n",
        "8b33bc5 add test.txt\n",
        "```\n",
        "\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)\n",
        "\n",
        "### Resetar\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git reset --hard f9f2e9c\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "HEAD is now at f9f2e9c mod2 test.txt\n",
        "```\n",
        "\n",
        "\n",
        "--\n",
        "\n",
        "### Histórico\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git log --oneline\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "f9f2e9c (HEAD -> master) mod2 test.txt\n",
        "dcbd894 mod test.txt\n",
        "8b33bc5 add test.txt\n",
        "```\n",
        "\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)\n",
        "\n",
        "### Remover arquivo\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "rm test.txt\n",
        "```\n",
        "\n",
        "\n",
        "### Adicionar\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git add -Av\n",
        "```\n",
        "\n",
        "\n",
        "### Commitar\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git commit -m \"rem text.txt\"\n",
        "```\n",
        "\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)\n",
        "\n",
        "### Histórico\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git log --oneline\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "6a417c5 (HEAD -> master) rem text.txt\n",
        "f9f2e9c mod2 test.txt\n",
        "dcbd894 mod test.txt\n",
        "8b33bc5 add test.txt\n",
        "```\n",
        "\n",
        "\n",
        "---\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## 2. **git reset**:  desfaz um commit deletando o histórico (deletando commits)\n",
        "\n",
        "### Resetar\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git reset --hard f9f2e9c\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "HEAD is now at f9f2e9c mod2 test.txt\n",
        "```\n",
        "\n",
        "\n",
        "--\n",
        "\n",
        "### Histórico\n",
        "\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "git log --oneline\n",
        "```\n",
        "\n",
        "```{bash eval=FALSE}\n",
        "f9f2e9c (HEAD -> master) mod2 test.txt\n",
        "dcbd894 mod test.txt\n",
        "8b33bc5 add test.txt\n",
        "```\n",
        "\n",
        "\n",
        "---\n",
        "\n",
        ", inverse\n",
        "![](img/gif_cat_ohh.gif)\n",
        "background-size: 600px\n",
        "background-position: 50% 50%\n",
        "\n",
        "---\n",
        "\n",
        "![](img/general_butterfly_effect.jpg)\n",
        "background-size: 600px\n",
        "background-position: 50% 95%\n",
        "\n",
        "# 13. Desfazer: git revert e git reset\n",
        "\n",
        "## Desfazendo operações no git\n",
        "\n",
        "### 1. **git revert**: desfaz um commit **preservando o histórico** (criando outro commit)\n",
        "\n",
        "### 2. **git reset**:  desfaz um commit **deletando o histórico** (deletando commits)\n"
      ],
      "id": "c2f9db8b"
    }
  ],
  "metadata": {
    "kernelspec": {
      "display_name": "Python 3",
      "language": "python",
      "name": "python3"
    }
  },
  "nbformat": 4,
  "nbformat_minor": 5
}